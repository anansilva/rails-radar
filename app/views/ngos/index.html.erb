<div class="homepage-banner" style="background-image: linear-gradient(-225deg, rgba(250,245,255,0.4) 0%, rgba(250,245,255,0.3) 50%), url('http://ww2.kqed.org/bayareabites/wp-content/uploads/sites/24/2015/11/BAB-SF-Food-bank-1440x960.jpg');">
  <div class="banner-content">
    <h1>FIND NGO</h1>
    <div class="container">
      <div id="search-bar">
        <%= render 'shared/searchbar' %>
      </div>
    </div>
  </div>
</div>

<div class="banner-icons">
  <%= link_to ngos_path(type: "Books"), class: "filter-icon" do %>
    <div class="banner-icons-type"><%= image_tag("icons/books_200.png", :width=>30, :crop=>"fill", id: "books") %></div>
  <% end %>
  <%= link_to ngos_path(:type => "Bycicles"), class: "filter-icon" do %>
    <div class="banner-icons-type"><%= image_tag("icons/bicycles_200.png", :width=>30, :crop=>"fill", id: "bycicles") %></div>
  <% end %>
  <%= link_to ngos_path(:type => "Clothes"), class: "filter-icon" do %>
    <div class="banner-icons-type"><%= image_tag("icons/clothes_200.png", :width=>30, :crop=>"fill", id: "clothes") %></div>
  <% end %>
  <%= link_to ngos_path(:type => "Furniture"), class: "filter-icon" do %>
    <div class="banner-icons-type"><%= image_tag("icons/furniture_200.png", :width=>30, :crop=>"fill", id: "furniture") %></div>
  <% end %>
  <%= link_to ngos_path(:type => "Food"), class: "filter-icon" do %>
    <div class="banner-icons-type"><%= image_tag("icons/food_200.png", :width=>30, :crop=>"fill", id: "food") %></div>
  <% end %>
  <%= link_to ngos_path(:type => "electronics"), class: "filter-icon" do %>
  <div class="banner-icons-type"><%= image_tag("icons/electronics_200.png", :width=>30, :crop=>"fill", id: "electronics") %></div>
  <% end %>
  <%= link_to ngos_path(:type => "Other"), class: "filter-icon" do %>
  <div class="banner-icons-type"><%= image_tag("icons/other_200.png", :width=>30, :crop=>"fill", id: "other") %></div>
  <% end %>
</div>

<div id="results" class="main-index-container">
  <%= render 'shared/card' %>
  <%= render 'shared/map' %>
</div>




<% content_for(:after_js) do %>
  <%= javascript_tag do %>
      styles = [
             {
                 "featureType": "all",
                 "elementType": "labels.text.fill",
                 "stylers": [
                     {
                         "saturation": 36
                     },
                     {
                         "color": "#333333"
                     },
                     {
                         "lightness": 40
                     }
                 ]
             },
             {
                 "featureType": "all",
                 "elementType": "labels.text.stroke",
                 "stylers": [
                     {
                         "visibility": "on"
                     },
                     {
                         "color": "#ffffff"
                     },
                     {
                         "lightness": 16
                     }
                 ]
             },
             {
                 "featureType": "all",
                 "elementType": "labels.icon",
                 "stylers": [
                     {
                         "visibility": "off"
                     }
                 ]
             },
             {
                 "featureType": "administrative",
                 "elementType": "geometry.fill",
                 "stylers": [
                     {
                         "color": "#fefefe"
                     },
                     {
                         "lightness": 20
                     }
                 ]
             },
             {
                 "featureType": "administrative",
                 "elementType": "geometry.stroke",
                 "stylers": [
                     {
                         "color": "#fefefe"
                     },
                     {
                         "lightness": 17
                     },
                     {
                         "weight": 1.2
                     }
                 ]
             },
             {
                 "featureType": "landscape",
                 "elementType": "geometry",
                 "stylers": [
                     {
                         "color": "#f5f5f5"
                     },
                     {
                         "lightness": 20
                     }
                 ]
             },
             {
                 "featureType": "poi",
                 "elementType": "geometry",
                 "stylers": [
                     {
                         "color": "#f5f5f5"
                     },
                   {
                       "lightness": 21
                   }
               ]
           },
             {
                 "featureType": "poi.park",
                 "elementType": "geometry",
                 "stylers": [
                     {
                         "color": "#dedede"
                     },
                     {
                         "lightness": 21
                     }
                 ]
             },
             {
                 "featureType": "road.highway",
                 "elementType": "geometry.fill",
                 "stylers": [
                     {
                         "color": "#ffffff"
                     },
                     {
                         "lightness": 17
                     }
                 ]
             },
             {
                 "featureType": "road.highway",
                 "elementType": "geometry.stroke",
                 "stylers": [
                     {
                         "color": "#ffffff"
                     },
                     {
                         "lightness": 29
                     },
                     {
                         "weight": 0.2
                     }
                 ]
             },
             {
                 "featureType": "road.arterial",
                 "elementType": "geometry",
                 "stylers": [
                     {
                         "color": "#ffffff"
                     },
                     {
                         "lightness": 18
                     }
                 ]
             },
             {
                 "featureType": "road.local",
                 "elementType": "geometry",
                 "stylers": [
                     {
                         "color": "#ffffff"
                     },
                     {
                         "lightness": 16
                     }
                 ]
             },
             {
                 "featureType": "transit",
                 "elementType": "geometry",
                 "stylers": [
                     {
                         "color": "#f2f2f2"
                     },
                     {
                         "lightness": 19
                     }
                 ]
             },
             {
                 "featureType": "water",
                 "elementType": "geometry",
                 "stylers": [
                     {
                         "color": "#e9e9e9"
                     },
                     {
                         "lightness": 17
                     }
                 ]
             },
             {
                 "featureType": "water",
                 "elementType": "geometry.fill",
                 "stylers": [
                     {
                         "saturation": "0"
                     },
                     {
                         "color": "#bab9b9"
                     }
                 ]
             }
         ]


    var handler = Gmaps.build('Google');

    var iconBase = 'http://res.cloudinary.com/dsmei8zni/image/upload/v1510754575/marker.png';

    var marker = new google.maps.Marker({
       position: [38.71667, -9.13333],
       map: map,
       icon: iconBase
     });

    handler.buildMap({

      internal: { id: 'map' }
    }, function() {
      markers = handler.addMarkers(<%= raw @hash.to_json %>);
      handler.bounds.extendWith(markers);

      handler.fitMapToBounds();

      if (markers.length == 0) {
        handler.getMap().setZoom(2);
      } else if (markers.length == 1) {
        handler.getMap().setZoom(14);
      }
    });
 <% end %>
<% end %>
